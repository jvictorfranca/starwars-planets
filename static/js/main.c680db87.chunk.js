(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),u=(a(13),a(1)),i=Object(n.createContext)(),o=a(2);var m=function(e){var t=e.filter,a=t.column,l=t.comparison,c=t.value,u=Object(n.useContext)(i),m=u.filters,s=u.setFilters;return r.a.createElement("section",{"data-testid":"filter",className:"created-filter"},r.a.createElement("p",null,a),r.a.createElement("p",null,l),r.a.createElement("p",null,c),r.a.createElement("button",{type:"button",onClick:function(){var e=m.filterByNumericValues.filter((function(e){return e!==t}));s((function(t){return Object(o.a)(Object(o.a)({},t),{},{filterByNumericValues:e})}))}},"X"))},s=a(7);var f=function(e){var t=e.options,a=Object(n.useState)("population"),l=Object(u.a)(a,2),c=l[0],m=l[1],f=Object(n.useState)("maior que"),p=Object(u.a)(f,2),E=p[0],d=p[1],b=Object(n.useState)(0),v=Object(u.a)(b,2),h=v[0],j=v[1],O=Object(n.useContext)(i),y=O.filters,g=O.setFilters;return Object(n.useEffect)((function(){m(t[0])}),[t]),t.length>0&&r.a.createElement("form",{action:"GET",className:"new-filter"},r.a.createElement("select",{name:"column",id:"column","data-testid":"column-filter",value:c,onChange:function(e){m(e.target.value)}},t.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),r.a.createElement("select",{name:"comparison",id:"comparison","data-testid":"comparison-filter",value:E,onChange:function(e){return d(e.target.value)}},r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a")),r.a.createElement("input",{type:"number","data-testid":"value-filter",value:h,onChange:function(e){return j(e.target.value)}}),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:function(){var e={column:c,comparison:E,value:h},t=Object(o.a)(Object(o.a)({},y),{},{filterByNumericValues:[].concat(Object(s.a)(y.filterByNumericValues),[e])});g(t)}},"Filtrar"))};var p=function(){var e=Object(n.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(i).filters;return Object(n.useEffect)((function(){l(["population","orbital_period","diameter","rotation_period","surface_water"]),c.filterByNumericValues.forEach((function(e){l((function(t){return t.filter((function(t){return t!==e.column}))})),console.log(e)}))}),[c]),r.a.createElement("section",null,r.a.createElement(f,{options:a}),r.a.createElement("div",{className:"filters-container"},c.filterByNumericValues.map((function(e,t){return r.a.createElement(m,{filter:e,key:t})}))))};var E=function(){var e=Object(n.useContext)(i),t=e.filters,a=e.setFilters;return r.a.createElement("input",{type:"text",onChange:function(e){a(Object(o.a)(Object(o.a)({},t),{},{filterByName:{name:e.target.value}}))},"data-testid":"name-filter",value:t.filterByName.name,className:"name-filter",placeholder:"Search by name:"})};var d=function(){var e=Object(n.useContext)(i),t=e.setData,a=e.setLoading;Object(n.useEffect)((function(){a(!0),fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()})).then((function(e){t(e.results)})).then(a(!1))}),[t,a])};var b=function(e){var t=e.planet,a=t.name,n=t.rotation_period,l=t.orbital_period,c=t.diameter,u=t.climate,i=t.gravity,o=t.terrain,m=t.surface_water,s=t.population,f=t.created,p=t.edited,E=t.url,d=t.films;return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,u),r.a.createElement("td",null,i),r.a.createElement("td",null,o),r.a.createElement("td",null,m),r.a.createElement("td",null,s),r.a.createElement("td",null,f),r.a.createElement("td",null,p),r.a.createElement("td",null,E),r.a.createElement("td",null,d.map((function(e){return r.a.createElement("p",{key:e},e)}))))};var v=function(){d();var e=Object(n.useContext)(i),t=e.data,a=e.loading,l=e.filters,c=t;return t&&(c=t.filter((function(e){return e.name.includes(l.filterByName.name)})),l.filterByNumericValues.forEach((function(e){c=c.filter((function(t){return function(e,t){var a;return"maior que"===t.comparison?a=parseInt(e[t.column],10)>parseInt(t.value,10):"menor que"===t.comparison?a=parseInt(e[t.column],10)<parseInt(t.value,10):"igual a"===t.comparison&&(a=parseInt(e[t.column],10)===parseInt(t.value,10)),a}(t,e)}))}))),a||!t?r.a.createElement("span",null,"Loading..."):r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"name"),r.a.createElement("th",null,"rotation"),r.a.createElement("th",null,"orbital"),r.a.createElement("th",null,"diameter"),r.a.createElement("th",null,"climate"),r.a.createElement("th",null,"gravity"),r.a.createElement("th",null,"terrain"),r.a.createElement("th",null,"water"),r.a.createElement("th",null,"population"),r.a.createElement("th",null,"created"),r.a.createElement("th",null,"edited"),r.a.createElement("th",null,"url"),r.a.createElement("th",null,"films"))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement(b,{planet:e,key:e.name})}))))};var h=function(e){var t=e.children,a=Object(n.useState)(),l=Object(u.a)(a,2),c=l[0],o=l[1],m=Object(n.useState)({filterByName:{name:""},filterByNumericValues:[]}),s=Object(u.a)(m,2),f=s[0],p=s[1],E=Object(n.useState)(!1),d=Object(u.a)(E,2),b={data:c,setData:o,filters:f,setFilters:p,loading:d[0],setLoading:d[1]};return r.a.createElement(i.Provider,{value:b},t)};var j=function(){return r.a.createElement(h,null,r.a.createElement("main",null,r.a.createElement(E,null),r.a.createElement(p,null),r.a.createElement(v,null)))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))},8:function(e,t,a){e.exports=a(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.c680db87.chunk.js.map